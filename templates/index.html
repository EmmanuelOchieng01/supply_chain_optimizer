<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supply Chain Optimizer</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöö Micro-Supply Chain Optimizer</h1>
            <p class="subtitle">AI-Powered Logistics with ML & Graph Optimization</p>
        </header>

        <div class="dashboard">
            <div class="control-panel">
                <h2>Configuration</h2>

                <div class="section">
                    <h3>üìç Depot Location</h3>
                    <input type="text" id="depot-name" placeholder="Depot Name" value="Main Depot - Nairobi">
                    <div class="coord-group">
                        <input type="number" id="depot-lat" placeholder="Latitude" value="-1.2921" step="0.0001">
                        <input type="number" id="depot-lng" placeholder="Longitude" value="36.8219" step="0.0001">
                    </div>
                </div>

                <div class="section">
                    <h3>üì¶ Delivery Points</h3>
                    <div id="delivery-list"></div>
                    <button class="btn-secondary" onclick="addDeliveryPoint()">+ Add Location</button>
                </div>

                <div class="section">
                    <h3>üöê Fleet Configuration</h3>
                    <label>Number of Vehicles</label>
                    <input type="number" id="num-vehicles" value="3" min="1" max="10">
                    <label>Vehicle Capacity (kg)</label>
                    <input type="number" id="vehicle-capacity" value="500" step="50">
                    <label>Cost per km ($)</label>
                    <input type="number" id="cost-per-km" value="2.5" step="0.1">
                </div>

                <div class="section">
                    <h3>‚öôÔ∏è Optimization Strategy</h3>
                    <select id="strategy">
                        <option value="cost_optimized">üí∞ Cost Optimized</option>
                        <option value="time_optimized">‚ö° Time Optimized</option>
                        <option value="balanced">‚öñÔ∏è Balanced</option>
                        <option value="green">üå± Green (Low Carbon)</option>
                    </select>
                </div>

                <button class="btn-primary" onclick="optimizeRoutes()">üöÄ Optimize Routes</button>
                <button class="btn-secondary" onclick="generateSampleData()">üìä Load Sample Data</button>

                <div id="loading" class="loading" style="display: none;">Optimizing routes...</div>
            </div>

            <div class="main-panel">
                <div class="map-container">
                    <div id="map"></div>
                </div>

                <div id="results" style="display: none;">
                    <div class="metrics-grid">
                        <div class="metric-card green">
                            <div class="metric-icon">üí∞</div>
                            <div class="metric-label">Total Cost</div>
                            <div class="metric-value" id="total-cost">$0</div>
                        </div>
                        <div class="metric-card blue">
                            <div class="metric-icon">üõ£Ô∏è</div>
                            <div class="metric-label">Distance</div>
                            <div class="metric-value" id="total-distance">0 km</div>
                        </div>
                        <div class="metric-card orange">
                            <div class="metric-icon">‚è±Ô∏è</div>
                            <div class="metric-label">Time</div>
                            <div class="metric-value" id="total-time">0 hrs</div>
                        </div>
                        <div class="metric-card purple">
                            <div class="metric-icon">üöö</div>
                            <div class="metric-label">Vehicles</div>
                            <div class="metric-value" id="vehicles-used">0</div>
                        </div>
                    </div>

                    <div class="chart-row">
                        <div class="chart-box">
                            <h3>Cost Breakdown</h3>
                            <div id="cost-chart"></div>
                        </div>
                        <div class="chart-box">
                            <h3>Route Efficiency</h3>
                            <div id="efficiency-chart"></div>
                        </div>
                    </div>

                    <div class="route-details">
                        <h3>Route Details</h3>
                        <div id="route-list"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/map.js') }}"></script>
</body>
</html>
